import{r as a,c as E}from"./client.CcI2PaBY.js";import{c as l,u as L,a as M,b as F,j as e,P as T,U as u,T as O,C as v,F as q,Q as R,d as A}from"./users.4lLWa-D0.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=l("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=l("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b=l("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=l("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=l("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=l("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=l("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=l("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),G=()=>{const{user:g,hasPermission:i}=L(),{data:t,isLoading:r}=M(),{data:k}=F(),[c,j]=a.useState(""),[d,p]=a.useState("all"),[o,y]=a.useState("all"),m=a.useMemo(()=>t?t.filter(s=>{const x=!c||s.teacherName?.toLowerCase().includes(c.toLowerCase())||s.subject?.toLowerCase().includes(c.toLowerCase())||s.gradeLevel?.toLowerCase().includes(c.toLowerCase()),h=d==="all"||s.status===d,P=o==="all"||s.frameworkId===o;return x&&h&&P}):[],[t,c,d,o]),n=a.useMemo(()=>t?{total:t.length,completed:t.filter(s=>s.status==="completed").length,inProgress:t.filter(s=>s.status==="in_progress").length,scheduled:t.filter(s=>s.status==="scheduled").length,crpEvidence:t.filter(s=>s.crpEvidence&&Object.values(s.crpEvidence).some(Boolean)).length}:{total:0,completed:0,inProgress:0,scheduled:0,crpEvidence:0},[t]),C=s=>{switch(s){case"completed":return e.jsx(N,{className:"w-4 h-4 text-green-600"});case"in_progress":return e.jsx(b,{className:"w-4 h-4 text-yellow-600"});case"scheduled":return e.jsx(v,{className:"w-4 h-4 text-blue-600"});default:return e.jsx(D,{className:"w-4 h-4 text-gray-600"})}},S=s=>{switch(s){case"completed":return"bg-green-100 text-green-800";case"in_progress":return"bg-yellow-100 text-yellow-800";case"scheduled":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return g?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"CRP Observations"}),e.jsx("p",{className:"text-gray-600",children:"Culturally Responsive Pedagogy in Action"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[i("observations","create")&&e.jsxs("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 flex items-center",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"New Observation"]}),e.jsxs("button",{className:"border border-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-50 flex items-center",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Export"]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(u,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:r?"...":n.total.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx(N,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Completed"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:r?"...":n.completed.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsx(b,{className:"w-4 h-4 text-yellow-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Progress"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:r?"...":n.inProgress.toLocaleString()})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(O,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"CRP Evidence"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:r?"...":`${Math.round(n.crpEvidence/Math.max(n.total,1)*100)}%`})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Goal Progress"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:r?"...":`${Math.round(n.total/5e3*100)}%`})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm mb-6",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(f,{className:"h-4 w-4 text-gray-400"})}),e.jsx("input",{type:"text",placeholder:"Search teachers, subjects...",className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:c,onChange:s=>j(s.target.value)})]}),e.jsx("div",{children:e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:d,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})}),e.jsx("div",{children:e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:o,onChange:s=>y(s.target.value),children:[e.jsx("option",{value:"all",children:"All Frameworks"}),k?.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>{j(""),p("all"),y("all")},className:"w-full px-3 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center justify-center",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})})]})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"px-6 py-4 border-b",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-lg font-medium text-gray-900",children:["Observations (",m.length,")"]})})}),r?e.jsx("div",{className:"p-6 text-center text-gray-500",children:"Loading observations..."}):m.length===0?e.jsx("div",{className:"p-6 text-center text-gray-500",children:t?.length===0?e.jsxs("div",{children:[e.jsx(u,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No observations yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first CRP observation."}),i("observations","create")&&e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700",children:"Create First Observation"})]}):e.jsxs("div",{children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No observations found"}),e.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]})}):e.jsx("div",{className:"divide-y divide-gray-200",children:m.map(s=>e.jsx("div",{className:"p-6 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(u,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:s.teacherName||"Unknown Teacher"}),e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${S(s.status)}`,children:[C(s.status),e.jsx("span",{className:"ml-1 capitalize",children:s.status.replace("_"," ")})]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Subject:"})," ",s.subject]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Grade:"})," ",s.gradeLevel]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duration:"})," ",s.duration," min"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Scheduled:"})," ",s.scheduledDate?new Date(s.scheduledDate).toLocaleDateString():"Not scheduled"]})]}),s.crpEvidence&&e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"CRP Evidence:"}),e.jsx("div",{className:"flex space-x-2",children:Object.entries(s.crpEvidence).map(([x,h])=>h&&e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-800",children:x.replace("_"," ").toUpperCase()},x))})]})})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:e.jsx(_,{className:"w-4 h-4"})}),i("observations","update")&&e.jsx("button",{className:"p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg",children:e.jsx(z,{className:"w-4 h-4"})}),i("observations","delete")&&e.jsx("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(U,{className:"w-4 h-4"})})]})]})},s.id))})]})]})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please sign in to view observations"})]})})},H=new R({defaultOptions:{queries:{staleTime:1e3*60*5,cacheTime:1e3*60*10}}}),w=document.getElementById("observations-root");w&&E.createRoot(w).render(a.createElement(A,{client:H},a.createElement(G)));
