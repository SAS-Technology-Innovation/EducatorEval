import{r as d}from"./index.BkCxzhY_.js";import{o as q}from"./firestore.2zEXouMz.js";import{c as v}from"./index.CRLXNNgt.js";import{s as F,m as M}from"./useAuth.3kjH0eSx.js";const D={"crp-in-action":{id:"crp-in-action",name:"CRP in Action: Integrated Observation Tool",description:"Comprehensive evaluation framework integrating Culturally Responsive Practices",version:"1.0",status:"active",lastModified:"2025-08-25",tags:["crp","culturally-responsive","assessment"],sections:[{id:"integrated-lookfors",title:"10 Look-Fors: Integrated Observation",description:"Evidence-based look-fors aligned to multiple frameworks",weight:100,questions:[{id:"lookfor1",text:"The learning target is clearly communicated, standards-based, and relevant to students. Students can explain what they are learning and why.",type:"rating",required:!0,scale:4,weight:10,tags:["learning-targets","clarity","standards"],helpText:"Look for visible learning targets and student understanding of purpose",frameworkAlignments:["5-daily-assessment","crp-curriculum","tripod-clarify"]},{id:"lookfor2",text:"Teacher fosters a respectful, inclusive, and identity-affirming environment where all students feel a sense of belonging.",type:"rating",required:!0,scale:4,weight:10,tags:["belonging","inclusive","identity-affirming"],helpText:"Observe inclusive language, cultural affirmation, and belonging practices",frameworkAlignments:["crp-general","casel-social-awareness","panorama","tripod-care"]},{id:"lookfor3",text:"Teacher checks for understanding and adjusts instruction in response to student needs.",type:"rating",required:!0,scale:4,weight:10,tags:["formative-assessment","responsive-teaching","differentiation"],helpText:"Look for checks for understanding and instructional adjustments",frameworkAlignments:["5-daily-assessment","tripod-clarify","inclusive-practices"]},{id:"lookfor4",text:"Teacher uses questioning strategies that increase cognitive demand and promote student thinking.",type:"rating",required:!0,scale:4,weight:10,tags:["questioning","cognitive-demand","critical-thinking"],helpText:"Observe higher-order questions and student thinking promotion",frameworkAlignments:["5-daily-assessment","crp-high-expectations","tripod-challenge"]},{id:"lookfor5",text:"Students are engaged in meaningful, collaborative learning experiences with clear roles and expectations.",type:"rating",required:!0,scale:4,weight:10,tags:["engagement","collaboration","student-roles"],helpText:"Look for purposeful collaboration with defined student roles",frameworkAlignments:["crp-general","casel-relationship-skills","tripod-captivate","inclusive-practices"]},{id:"lookfor6",text:"Teacher demonstrates cultural competence and integrates students' backgrounds and experiences into the lesson.",type:"rating",required:!0,scale:4,weight:10,tags:["cultural-competence","student-backgrounds","culturally-responsive"],helpText:"Observe integration of student cultures and experiences into instruction",frameworkAlignments:["crp-learning-partnerships","panorama","casel-social-awareness","tripod-confer"]},{id:"lookfor7",text:"Teacher actively monitors and supports students during group and independent work.",type:"rating",required:!0,scale:4,weight:10,tags:["monitoring","support","independent-work"],helpText:"Look for active circulation and targeted student support",frameworkAlignments:["5-daily-assessment","tripod-control","inclusive-practices"]},{id:"lookfor8",text:"Students have opportunities to reflect on and consolidate their learning during and after the lesson.",type:"rating",required:!0,scale:4,weight:10,tags:["reflection","consolidation","metacognition"],helpText:"Observe student reflection and learning consolidation opportunities",frameworkAlignments:["5-daily-assessment","casel-self-management","tripod-consolidate"]},{id:"lookfor9",text:"Teacher builds strong, trusting relationships with students through affirming interactions.",type:"rating",required:!0,scale:4,weight:10,tags:["relationships","trust","affirming-interactions"],helpText:"Look for positive, affirming teacher-student interactions",frameworkAlignments:["panorama","crp-general","casel-relationship-skills","tripod-care"]},{id:"lookfor10",text:"Instruction is differentiated and scaffolds support access for diverse learning needs.",type:"rating",required:!0,scale:4,weight:10,tags:["differentiation","scaffolding","diverse-learners"],helpText:"Observe differentiated instruction and scaffolding for all learners",frameworkAlignments:["inclusive-practices","crp-general","casel-equity-access","tripod-clarify"]}]}]}};class f{constructor(){this.frameworks=D}static getInstance(){return f.instance||(f.instance=new f),f.instance}getFramework(s){return this.frameworks[s]}getAllFrameworks(){return Object.values(this.frameworks)}getActiveFrameworks(){return this.getAllFrameworks().filter(s=>s.status==="active")}getQuestions(s,o){const l=this.getFramework(s);if(!l)return[];if(o){const i=l.sections.find(p=>p.id===o);return i?i.questions:[]}return l.sections.flatMap(i=>i.questions)}getObservationQuestions(s="crp-in-action"){return this.getQuestions(s,"integrated-lookfors")}getSections(s){const o=this.getFramework(s);return o?o.sections:[]}updateFramework(s,o){return this.frameworks[s]?(this.frameworks[s]={...this.frameworks[s],...o,lastModified:new Date().toISOString().split("T")[0]},!0):!1}updateQuestions(s,o,l){const i=this.frameworks[s];if(!i)return!1;const p=i.sections.findIndex(u=>u.id===o);return p===-1?!1:(i.sections[p].questions=l,i.lastModified=new Date().toISOString().split("T")[0],!0)}addFramework(s){return this.frameworks[s.id]?!1:(this.frameworks[s.id]=s,!0)}getFrameworkOptions(){return[{id:"crp-general",label:"CRP (General)",category:"Culturally Responsive",color:"green"},{id:"crp-curriculum",label:"CRP (Curriculum Relevance)",category:"Culturally Responsive",color:"green"},{id:"crp-high-expectations",label:"CRP (High Expectations)",category:"Culturally Responsive",color:"green"},{id:"crp-learning-partnerships",label:"CRP (Learning Partnerships)",category:"Culturally Responsive",color:"green"},{id:"casel-social-awareness",label:"CASEL (Social Awareness)",category:"Social-Emotional",color:"pink"},{id:"casel-relationship-skills",label:"CASEL (Relationship Skills)",category:"Social-Emotional",color:"pink"},{id:"casel-self-management",label:"CASEL (Self-Management)",category:"Social-Emotional",color:"pink"},{id:"casel-equity-access",label:"CASEL (Equity & Access)",category:"Social-Emotional",color:"pink"},{id:"tripod-care",label:"Tripod: Care",category:"7Cs of Learning",color:"blue"},{id:"tripod-clarify",label:"Tripod: Clarify",category:"7Cs of Learning",color:"blue"},{id:"tripod-challenge",label:"Tripod: Challenge",category:"7Cs of Learning",color:"blue"},{id:"tripod-captivate",label:"Tripod: Captivate",category:"7Cs of Learning",color:"blue"},{id:"tripod-confer",label:"Tripod: Confer",category:"7Cs of Learning",color:"blue"},{id:"tripod-consolidate",label:"Tripod: Consolidate",category:"7Cs of Learning",color:"blue"},{id:"tripod-control",label:"Tripod: Control",category:"7Cs of Learning",color:"blue"},{id:"5-daily-assessment",label:"5 Daily Assessment Practices",category:"Assessment",color:"yellow"},{id:"panorama",label:"Panorama (Student Experience)",category:"Student Experience",color:"purple"},{id:"inclusive-practices",label:"Inclusive Practices",category:"Inclusion & Equity",color:"indigo"}]}}const Q=f.getInstance(),N=h=>{const[s,o]=d.useState([]),[l,i]=d.useState({total:0,thisMonth:0,crpEvidenceAverage:0}),[p,u]=d.useState(!0),[k,n]=d.useState(null),g=F()?M:q,y=d.useCallback(async()=>{if(h){console.log("Observer ID:",h);try{u(!0),n(null);const t=await g.getByObserver(h);o(t)}catch(t){console.error("Error loading observations:",t);const e=t instanceof Error?t.message:"Failed to load observations";n(e)}finally{u(!1)}}},[h,g]),m=d.useCallback(async()=>{try{const t=await g.getStats();i(t)}catch(t){console.error("Failed to load stats:",t)}},[g]);d.useEffect(()=>{y(),m()},[y,m]);const w=async t=>{try{n(null);const e=v(t.responses),r=Object.keys(t.responses).length,a={...t,crpEvidenceCount:e,totalLookFors:r},c=await g.create(a);return await y(),await m(),c}catch(e){const r=e instanceof Error?e.message:"Failed to create observation";return n(r),null}},b=async(t,e)=>{try{n(null);let r={...e};if(e.responses){const a=v(e.responses),c=Object.keys(e.responses).length;r={...e,crpEvidenceCount:a,totalLookFors:c}}return await g.update(t,r),o(a=>a.map(c=>c.id===t?{...c,...r}:c)),await m(),!0}catch(r){const a=r instanceof Error?r.message:"Failed to update observation";return n(a),!1}},C=t=>s.find(e=>e.id===t),x=t=>s.filter(e=>e.status===t),O=(t,e)=>s.filter(r=>{const a=new Date(r.date);return a>=t&&a<=e}),E=async t=>{try{return n(null),await g.getByTeacher(t)}catch(e){const r=e instanceof Error?e.message:"Failed to load teacher observations";return n(r),[]}},T=async(t=20)=>{try{return n(null),(await g.getRecent(t)).observations}catch(e){const r=e instanceof Error?e.message:"Failed to load recent observations";return n(r),[]}},L=()=>{const e=Math.min(l.total/5e3*100,100);return{current:l.total,goal:5e3,percentage:Math.round(e*10)/10}},S=d.useCallback(async(t,e)=>{try{u(!0),n(null);let r=[...s];t.trim()&&(r=r.filter(a=>a.teacherName.toLowerCase().includes(t.toLowerCase())||a.observerName.toLowerCase().includes(t.toLowerCase())||a.overallComment.toLowerCase().includes(t.toLowerCase()))),e?.status&&e.status.length>0&&(r=r.filter(a=>e.status.includes(a.status))),o(r)}catch(r){n(r instanceof Error?r.message:"Failed to search observations")}finally{u(!1)}},[s]),A=d.useCallback(async t=>{try{u(!0),n(null);let e=[...s];t.status&&t.status.length>0&&(e=e.filter(r=>t.status.includes(r.status))),t.dateRange&&(e=e.filter(r=>{const a=new Date(r.date),c=new Date(t.dateRange.start),R=new Date(t.dateRange.end);return a>=c&&a<=R})),o(e)}catch(e){n(e instanceof Error?e.message:"Failed to filter observations")}finally{u(!1)}},[s]);return{observations:s,stats:l,loading:p,error:k,createObservation:w,updateObservation:b,getObservationById:C,getObservationsByStatus:x,getObservationsByDateRange:O,getObservationsByTeacher:E,getRecentObservations:T,getProgress:L,loadObservations:y,loadStats:m,searchObservations:S,filterObservations:A,clearError:()=>n(null)}};export{Q as f,N as u};
